{"version":3,"file":"Servers.js","sourceRoot":"","sources":["../../src/servers/Servers.ts"],"names":[],"mappings":"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","sourcesContent":["import type GPortalAuth from '../auth/Auth';\r\nimport type GPortalSocket from '../socket/Socket';\r\nimport type RCEManager from '../Manager';\r\nimport { GPortalRoutes, RCEEvent } from '../constants';\r\nimport type {\r\n  ServerOptions,\r\n  FarmingSim25Server,\r\n  CommandResponse,\r\n  FarmingSim25ServerInformation,\r\n  FetchedServer,\r\n  FarmingSim25ServerAdvancedInformation,\r\n} from './interfaces';\r\nimport ServerUtils from '../util/ServerUtils';\r\nimport CommandHandler from './CommandHandler';\r\nimport Helper from '../helper';\r\n\r\nexport default class ServerManager {\r\n  private _manager: RCEManager;\r\n  private _auth: GPortalAuth;\r\n  private _socket: GPortalSocket;\r\n  private _servers: Map<string, FarmingSim25Server> = new Map();\r\n\r\n  public constructor(\r\n    manager: RCEManager,\r\n    auth: GPortalAuth,\r\n    socket: GPortalSocket\r\n  ) {\r\n    this._manager = manager;\r\n    this._auth = auth;\r\n    this._socket = socket;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param opts {ServerOptions[]} - The server options\r\n   * @returns {Promise<void>} - Resolves once all servers have been added\r\n   * @description Adds multiple servers to the manager\r\n   *\r\n   * @example\r\n   * ```js\r\n   * await manager.servers.addMany([\r\n   *  {\r\n   *    identifier: \"my-server-id\",\r\n   *    serverId: 1234567,\r\n   *    region: \"EU\",\r\n   *    playerRefreshing: true,\r\n   *    radioRefreshing: true,\r\n   *    extendedEventRefreshing: true,\r\n   *    intents: [RCEIntent.All]\r\n   *  },\r\n   *  {\r\n   *    identifier: \"my-server-id-2\",\r\n   *    serverId: 7654321,\r\n   *    region: \"US\",\r\n   *    playerRefreshing: true,\r\n   *    radioRefreshing: true,\r\n   *    extendedEventRefreshing: true,\r\n   *    intents: [RCEIntent.All]\r\n   *  }\r\n   * ]);\r\n   * ```\r\n   */\r\n  public async addMany(opts: ServerOptions[]) {\r\n    await Promise.all(opts.map((opt) => this.add(opt)));\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param opts {ServerOptions} - The server options\r\n   * @returns {Promise<boolean>} - Whether the server was added successfully\r\n   * @description Adds a server to the manager\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const server = await manager.servers.add({\r\n   *  identifier: \"my-server-id\",\r\n   *  serverId: 1234567,\r\n   *  region: \"EU\",\r\n   *  playerRefreshing: true,\r\n   *  radioRefreshing: true,\r\n   *  extendedEventRefreshing: true,\r\n   *  intents: [RCEIntent.All]\r\n   * });\r\n   * ```\r\n   */\r\n  public async add(opts: ServerOptions) {\r\n    this._manager.logger.debug(`Adding Server: ${opts.identifier}`);\r\n\r\n    if (!Array.isArray(opts.serverId) || !opts.serverId[1]) {\r\n      opts.serverId = [\r\n        Array.isArray(opts.serverId) ? opts.serverId[0] : opts.serverId,\r\n      ];\r\n\r\n      if (\r\n        !Number(opts.serverId[0]) ||\r\n        opts.serverId[0].toString().length !== 7\r\n      ) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          `[${opts.identifier}] Failed To Add Server: Invalid SID (Incorrect Length)`\r\n        );\r\n        return false;\r\n      }\r\n\r\n      const sid = await this.fetchId(\r\n        opts.identifier,\r\n        opts.serverId[0],\r\n        opts.region\r\n      );\r\n\r\n      if (sid) {\r\n        opts.serverId.push(sid);\r\n      }\r\n    }\r\n\r\n    if (!opts.serverId[1]) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${opts.identifier}] Failed To Add Server: Invalid SID`\r\n      );\r\n      return false;\r\n    }\r\n\r\n    const status = await this.fetchStatus(\r\n      opts.identifier,\r\n      opts.serverId[1],\r\n      opts.region\r\n    );\r\n    if (!status) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${opts.identifier}] Failed To Add Server: No Status Information`\r\n      );\r\n      return false;\r\n    }\r\n\r\n    if (status === 'SUSPENDED') {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${opts.identifier}] Failed To Add Server: Suspended`\r\n      );\r\n      return false;\r\n    }\r\n\r\n    this._servers.set(opts.identifier, {\r\n      identifier: opts.identifier,\r\n      serverId: opts.serverId,\r\n      region: opts.region,\r\n      intervals: {\r\n        playerRefreshing: {\r\n          enabled: opts.playerRefreshing ?? false,\r\n          interval: opts.playerRefreshing\r\n            ? setInterval(() => {\r\n                const s = this.get(opts.identifier);\r\n                if (s?.status === 'RUNNING') {\r\n                  this.updatePlayers(opts.identifier);\r\n                }\r\n              }, 60_000)\r\n            : undefined,\r\n        },\r\n        radioRefreshing: {\r\n          enabled: opts.radioRefreshing ?? false,\r\n          interval: opts.radioRefreshing\r\n            ? setInterval(() => {\r\n                const s = this.get(opts.identifier);\r\n                if (s?.status === 'RUNNING') {\r\n                  this.updateBroadcasters(opts.identifier);\r\n                }\r\n              }, 30_000)\r\n            : undefined,\r\n        },\r\n        extendedEventRefreshing: {\r\n          enabled: opts.extendedEventRefreshing ?? false,\r\n          interval: opts.extendedEventRefreshing\r\n            ? setInterval(() => {\r\n                const s = this.get(opts.identifier);\r\n                if (s?.status === 'RUNNING') {\r\n                  this.fetchGibs(opts.identifier);\r\n                }\r\n              }, 60_000)\r\n            : undefined,\r\n        },\r\n      },\r\n      flags: [],\r\n      state: opts.state ?? [],\r\n      status: status as FarmingSim25Server['status'],\r\n      players: [],\r\n      frequencies: [],\r\n      intents: opts.intents,\r\n    });\r\n\r\n    const server = this._servers.get(opts.identifier);\r\n    this._socket.addServer(server);\r\n\r\n    this._manager.logger.debug(\r\n      `[${server.identifier}] Server Status: ${status}`\r\n    );\r\n\r\n    if (status === 'RUNNING') {\r\n      await ServerUtils.setReady(this._manager, server, true);\r\n\r\n      if (opts.playerRefreshing) {\r\n        await this.updatePlayers(opts.identifier);\r\n      }\r\n\r\n      if (opts.radioRefreshing) {\r\n        await this.updateBroadcasters(opts.identifier);\r\n      }\r\n\r\n      if (opts.extendedEventRefreshing) {\r\n        await this.fetchGibs(opts.identifier);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param server {FarmingSim25Server} - The server to update\r\n   * @returns {void}\r\n   * @description Updates a server\r\n   *\r\n   * @example\r\n   * ```js\r\n   * manager.servers.update(server);\r\n   * ```\r\n   */\r\n  public update(server: FarmingSim25Server) {\r\n    this._manager.logger.debug(`[${server.identifier}] Updating Server`);\r\n\r\n    this._servers.set(server.identifier, server);\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n   * @description Removes all servers from the manager\r\n   *\r\n   * @example\r\n   * ```js\r\n   * manager.servers.removeAll();\r\n   * ```\r\n   */\r\n  public removeAll() {\r\n    this._servers.forEach((server) => this.remove(server));\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param identifiers {string[]} - The server identifiers to remove\r\n   * @returns {void}\r\n   * @description Removes multiple servers from the manager\r\n   *\r\n   * @example\r\n   * ```js\r\n   * manager.servers.removeMany([\"my-server-id\", \"my-server-id-2\"]);\r\n   * ```\r\n   */\r\n  public removeMany(identifiers: string[]) {\r\n    identifiers.forEach((identifier) => {\r\n      const server = this.get(identifier);\r\n      if (server) {\r\n        this.remove(server);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param server {FarmingSim25Server} - The server to remove\r\n   * @returns {void}\r\n   * @description Removes a server from the manager\r\n   *\r\n   * @example\r\n   * ```js\r\n   * manager.servers.remove(server);\r\n   * ```\r\n   */\r\n  public remove(server: FarmingSim25Server) {\r\n    this._manager.logger.debug(`[${server.identifier}] Removing Server`);\r\n\r\n    clearInterval(server.intervals.playerRefreshing.interval);\r\n    clearInterval(server.intervals.radioRefreshing.interval);\r\n    clearInterval(server.intervals.extendedEventRefreshing.interval);\r\n    this._socket.removeServer(server);\r\n    this._servers.delete(server.identifier);\r\n\r\n    this._manager.logger.info(`[${server.identifier}] Server Removed`);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param identifier {string} - The server identifier\r\n   * @returns {FarmingSim25Server | undefined} - The server\r\n   * @description Gets a server by its identifier\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const server = manager.servers.get(\"my-server-id\");\r\n   * ```\r\n   */\r\n  public get(identifier: string) {\r\n    return this._servers.get(identifier);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {FarmingSim25Server[]} - All servers\r\n   * @description Gets all servers\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const servers = manager.servers.getAll();\r\n   * ```\r\n   */\r\n  public getAll() {\r\n    return this._servers;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param identifier - The server identifier\r\n   * @param rawHostname - Whether to return the raw hostname\r\n   * @returns {Promise<FarmingSim25ServerInformation | null>} - The server information\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const info = await manager.servers.info(\"my-server-id\");\r\n   * ```\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const info = await manager.servers.info(\"my-server-id\", true);\r\n   * ```\r\n   */\r\n  public async info(identifier: string, rawHostname: boolean = false) {\r\n    const server = this.get(identifier);\r\n    if (!server) {\r\n      ServerUtils.error(this._manager, `[${identifier}] Invalid Server`);\r\n      return null;\r\n    }\r\n\r\n    const info = await this.command(server.identifier, 'serverinfo', true);\r\n    if (!info?.response) {\r\n      ServerUtils.error(this._manager, 'Failed To Fetch Server Info', server);\r\n      return null;\r\n    }\r\n\r\n    const data: FarmingSim25ServerInformation = Helper.cleanOutput(\r\n      info.response,\r\n      true,\r\n      rawHostname\r\n    );\r\n    return data;\r\n  }\r\n\r\n  public async fetchAdvanced(\r\n    identifier: string\r\n  ): Promise<FarmingSim25ServerAdvancedInformation> {\r\n    const token = this._auth?.accessToken;\r\n    if (!token) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Fetch Advanced Information: No Access Token`\r\n      );\r\n      return null;\r\n    }\r\n\r\n    const server = this._servers.get(identifier);\r\n    if (!server) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Fetch Advanced Information: Invalid Server`\r\n      );\r\n      return null;\r\n    }\r\n\r\n    this._manager.logger.debug(`[${identifier}] Fetching Advanced Information`);\r\n\r\n    try {\r\n      const payload = {\r\n        operationName: 'ctx',\r\n        variables: {\r\n          sid: server.serverId[1],\r\n          region: server.region,\r\n        },\r\n        query:\r\n          'query ctx($sid: Int!, $region: REGION!) {\\n  cfgContext(rsid: {id: $sid, region: $region}) {\\n    ns {\\n      ...CtxFields\\n      __typename\\n    }\\n    errors {\\n      mutator\\n      affectedPaths\\n      error {\\n        class_\\n        args\\n        __typename\\n      }\\n      scope\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment GameServerFields on GameServer {\\n  id\\n  serverName\\n  serverPort\\n  serverIp\\n  autoUpdate\\n  __typename\\n}\\n\\nfragment PermissionFields on Permission {\\n  userName\\n  created\\n  __typename\\n}\\n\\nfragment MysqlDbFields on CustomerMysqlDb {\\n  httpUrl\\n  host\\n  port\\n  database\\n  username\\n  password\\n  __typename\\n}\\n\\nfragment ServiceStateFields on ServiceState {\\n  state\\n  fsmState\\n  fsmIsTransitioning\\n  fsmIsExclusiveLocked\\n  fsmFileAccess\\n  fsmLastStateChange\\n  fsmStateLiveProgress {\\n    ... on InstallProgress {\\n      action\\n      percentage\\n      __typename\\n    }\\n    ... on BroadcastProgress {\\n      nextMessageAt\\n      stateExitAt\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment RestartTaskFields on RestartTask {\\n  id\\n  runOnWeekday\\n  runOnDayofmonth\\n  runAtTimeofday\\n  runInTimezone\\n  schedule\\n  data {\\n    description\\n    args\\n    scheduleExtended\\n    nextFireTime\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment DisplayPortFields on DisplayPorts {\\n  rconPort\\n  queryPort\\n  __typename\\n}\\n\\nfragment SteamWorkshopItemFields on SteamWorkshopItem {\\n  id\\n  appId\\n  itemType\\n  name\\n  links {\\n    websiteUrl\\n    __typename\\n  }\\n  summary\\n  logo {\\n    url\\n    __typename\\n  }\\n  maps {\\n    workshopId\\n    mapName\\n    __typename\\n  }\\n  dateCreated\\n  dateModified\\n  lastUpdateTime\\n  __typename\\n}\\n\\nfragment SevenDaysModFields on SevenDaysMod {\\n  id\\n  name\\n  repoKey\\n  active\\n  created\\n  modified\\n  __typename\\n}\\n\\nfragment MapParams on FarmingSimulatorMapParamsObject {\\n  serverIp\\n  webServerPort\\n  webStatsCode\\n  token\\n  __typename\\n}\\n\\nfragment TxAdminFields on TxAdmin {\\n  enabled\\n  port\\n  username\\n  password\\n  __typename\\n}\\n\\nfragment CtxFields on RootNamespace {\\n  sys {\\n    game {\\n      name\\n      key\\n      platform\\n      forumBoardId\\n      supportedPlatforms\\n      __typename\\n    }\\n    extraGameTranslationKeys\\n    gameServer {\\n      ...GameServerFields\\n      __typename\\n    }\\n    permissionsOwner {\\n      ...PermissionFields\\n      __typename\\n    }\\n    permissions {\\n      ...PermissionFields\\n      __typename\\n    }\\n    mysqlDb {\\n      ...MysqlDbFields\\n      __typename\\n    }\\n    __typename\\n  }\\n  service {\\n    config {\\n      rsid {\\n        id\\n        region\\n        __typename\\n      }\\n      type\\n      hwId\\n      state\\n      ftpUser\\n      ftpPort\\n      ftpPassword\\n      ftpReadOnly\\n      ipAddress\\n      rconPort\\n      queryPort\\n      autoBackup\\n      dnsNames\\n      currentVersion\\n      targetVersion\\n      __typename\\n    }\\n    latestRev {\\n      id\\n      created\\n      __typename\\n    }\\n    maxSlots\\n    files\\n    memory {\\n      base\\n      effective\\n      __typename\\n    }\\n    currentState {\\n      ...ServiceStateFields\\n      __typename\\n    }\\n    backups {\\n      id\\n      userSize\\n      created\\n      isAutoBackup\\n      __typename\\n    }\\n    restartSchedule {\\n      ...RestartTaskFields\\n      __typename\\n    }\\n    dnsAvailableTlds\\n    __typename\\n  }\\n  admin {\\n    hardwareGuacamoleConnection {\\n      url\\n      __typename\\n    }\\n    __typename\\n  }\\n  profile {\\n    __typename\\n    ... on ProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on MinecraftProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        additionalPorts\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      worlds\\n      addonRam\\n      isRamServer\\n      ramOrderCreationDate\\n      ramStopTimeUtc\\n      isConnectedToBungeecord\\n      bungeecordServerUrl\\n      executables {\\n        id\\n        name\\n        key\\n        default\\n        __typename\\n      }\\n      mods {\\n        id\\n        repoKey\\n        name\\n        image\\n        mindRam\\n        projectUrl\\n        revisions {\\n          id\\n          created\\n          executableId\\n          extraData\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on CsgoProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        gotvPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      installedMaps {\\n        name\\n        displayName\\n        workshopItem {\\n          ...SteamWorkshopItemFields\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ValheimProfileNamespace {\\n      name\\n      cfgFiles\\n      clientLink\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on HellLetLooseProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        statsPort\\n        beaconPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on AloftProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      serverRoomCode\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on SevenDaysToDieProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        telnetPort\\n        webDashboardPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      availableMods {\\n        ...SevenDaysModFields\\n        __typename\\n      }\\n      isModUpdateAvailable\\n      __typename\\n    }\\n    ... on SoulmaskProfileNamespace {\\n      name\\n      cfgFiles\\n      gameUid\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on VRisingProfileNamespace {\\n      name\\n      cfgFiles\\n      isLaunchServer\\n      isOfficialServer\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on RustConsoleProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      modifyActionHints\\n      __typename\\n    }\\n    ... on FarmingSimulatorProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      wiLink\\n      defaultModSpace\\n      masterWiLink\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        webPort\\n        __typename\\n      }\\n      mapParams {\\n        ...MapParams\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on BungeecordProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        additionalPorts\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      gpServers\\n      accessibleMinecraftServers {\\n        ...GameServerFields\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ConanProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      isModUpdateAvailable\\n      __typename\\n    }\\n    ... on FiveMProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      txAdmin {\\n        ...TxAdminFields\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ScumProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      enableDeleteSavegames\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        serverPort\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on PalworldProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        __typename\\n      }\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on AbioticFactorProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      joinCode\\n      __typename\\n    }\\n  }\\n  __typename\\n}',\r\n      };\r\n\r\n      const response = await fetch(GPortalRoutes.Api, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          `Failed To Fetch Advanced Information: HTTP ${response.status} ${response.statusText}`\r\n        );\r\n        return null;\r\n      }\r\n\r\n      const json = await response.json();\r\n      const advanced = json?.data?.cfgContext?.ns;\r\n\r\n      if (!advanced) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          'Failed To Fetch Advanced Information: No Data'\r\n        );\r\n        return null;\r\n      }\r\n\r\n      const { sys, service } = advanced;\r\n\r\n      const permissions = sys?.permissions?.map((p) => {\r\n        return {\r\n          username: p.userName,\r\n          created: new Date(p.created),\r\n          owner: false,\r\n        };\r\n      });\r\n      permissions.push({\r\n        username: sys?.permissionsOwner?.userName,\r\n        created: new Date(sys?.permissionsOwner?.created),\r\n        owner: true,\r\n      });\r\n\r\n      const data: FarmingSim25ServerAdvancedInformation = {\r\n        name: sys?.game?.name,\r\n        platforms: sys?.game?.supportedPlatforms,\r\n        ipPort: `${sys?.gameServer?.serverIp}:${sys?.gameServer?.serverPort}`,\r\n        permissions,\r\n        backups: service?.backups?.map((b) => {\r\n          return {\r\n            id: b.id,\r\n            size: b.userSize,\r\n            created: new Date(b.created),\r\n            auto: b.isAutoBackup,\r\n          };\r\n        }),\r\n        restarts: service?.restartSchedule?.map((r) => {\r\n          return {\r\n            id: r.id,\r\n            nextRun: new Date(r.data.nextFireTime),\r\n            schedule: {\r\n              type: r.schedule,\r\n              timezone: r.runInTimezone,\r\n              day: r.runOnWeekday,\r\n              dayOfMonth: r.runOnDayofmonth,\r\n              time: r.runAtTimeofday,\r\n            },\r\n          };\r\n        }),\r\n      };\r\n\r\n      this._manager.logger.debug(\r\n        `[${identifier}] Advanced Information Fetched: ${data.name}`\r\n      );\r\n\r\n      return data;\r\n    } catch (error) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `Failed To Fetch Advanced Information: ${error}`\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param identifier - The server identifier\r\n   * @param command - The command to send\r\n   * @param response - Whether to wait for a response\r\n   * @returns {Promise<CommandResponse>} - The command response\r\n   *\r\n   * @example\r\n   * ```js\r\n   * await manager.servers.command(\"my-server-id\", \"say Hello World!\");\r\n   * ```\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const response = await manager.servers.command(\"my-server-id\", \"getauthlevels\", true);\r\n   * ```\r\n   */\r\n  public async command(\r\n    identifier: string,\r\n    command: string,\r\n    response: boolean = false\r\n  ): Promise<CommandResponse> {\r\n    const token = this._auth?.accessToken;\r\n    if (!token) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Send Command: No Access Token`\r\n      );\r\n      return { ok: false, error: 'No Access Token' };\r\n    }\r\n\r\n    const server = this._servers.get(identifier);\r\n    if (!server) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Send Command: Invalid Server`\r\n      );\r\n      return { ok: false, error: 'Invalid Server' };\r\n    }\r\n\r\n    if (server.status !== 'RUNNING') {\r\n      this._manager.logger.warn(\r\n        `[${identifier}] Failed To Send Command: Server Not Running`\r\n      );\r\n      return { ok: false, error: 'Server Not Running' };\r\n    }\r\n\r\n    this._manager.logger.debug(`[${identifier}] Sending Command: ${command}`);\r\n\r\n    const payload = {\r\n      operationName: 'sendConsoleMessage',\r\n      variables: {\r\n        sid: server.serverId[1],\r\n        region: server.region,\r\n        message: command,\r\n      },\r\n      query:\r\n        'mutation sendConsoleMessage($sid: Int!, $region: REGION!, $message: String!) {\\n  sendConsoleMessage(rsid: {id: $sid, region: $region}, message: $message) {\\n    ok\\n    __typename\\n  }\\n}',\r\n    };\r\n\r\n    if (response) {\r\n      return new Promise(async (resolve, reject) => {\r\n        CommandHandler.add({\r\n          identifier,\r\n          command,\r\n          resolve,\r\n          reject,\r\n        });\r\n\r\n        try {\r\n          const response = await fetch(GPortalRoutes.Api, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n            body: JSON.stringify(payload),\r\n          });\r\n\r\n          if (!response.ok) {\r\n            ServerUtils.error(\r\n              this._manager,\r\n              `Failed To Send Command: HTTP ${response.status} ${response.statusText}`,\r\n              server\r\n            );\r\n            CommandHandler.remove(CommandHandler.get(identifier, command));\r\n            resolve({\r\n              ok: false,\r\n              error: `HTTP ${response.status} ${response.statusText}`,\r\n            });\r\n          }\r\n\r\n          const data = await response.json();\r\n          if (!data?.data?.sendConsoleMessage?.ok) {\r\n            ServerUtils.error(\r\n              this._manager,\r\n              'Failed To Send Command: AioRpcError',\r\n              server\r\n            );\r\n            CommandHandler.remove(CommandHandler.get(identifier, command));\r\n            resolve({\r\n              ok: false,\r\n              error: 'AioRpcError',\r\n            });\r\n          }\r\n\r\n          const cmd = CommandHandler.get(identifier, command);\r\n          if (cmd) {\r\n            cmd.timeout = setTimeout(() => {\r\n              CommandHandler.remove(CommandHandler.get(identifier, command));\r\n              resolve({\r\n                ok: true,\r\n                response: undefined,\r\n              });\r\n            }, 3_000);\r\n          }\r\n        } catch (error) {\r\n          CommandHandler.remove(CommandHandler.get(identifier, command));\r\n          resolve({\r\n            ok: false,\r\n            error: error.message,\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      try {\r\n        const response = await fetch(GPortalRoutes.Api, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify(payload),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          ServerUtils.error(\r\n            this._manager,\r\n            `Failed To Send Command: HTTP ${response.status} ${response.statusText}`,\r\n            server\r\n          );\r\n          return {\r\n            ok: false,\r\n            error: `HTTP ${response.status} ${response.statusText}`,\r\n          };\r\n        }\r\n\r\n        return {\r\n          ok: true,\r\n          response: undefined,\r\n        };\r\n      } catch (error) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          `Failed To Send Command: ${error}`,\r\n          server\r\n        );\r\n        return {\r\n          ok: false,\r\n          error: error.message,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  private async updateBroadcasters(identifier) {\r\n    const server = this.get(identifier);\r\n    if (!server) {\r\n      return this._manager.logger.warn(\r\n        `[${identifier}] Failed To Update Broadcasters: Invalid Server`\r\n      );\r\n    }\r\n\r\n    this._manager.logger.debug(`[${server.identifier}] Updating Broadcasters`);\r\n\r\n    const broadcasters = await this.command(\r\n      server.identifier,\r\n      'rf.listboardcaster',\r\n      true\r\n    );\r\n    if (!broadcasters?.response) {\r\n      return this._manager.logger.warn(\r\n        `[${server.identifier}] Failed To Update Broadcasters`\r\n      );\r\n    }\r\n\r\n    const broadcasts = [];\r\n\r\n    const regex =\r\n      /\\[(\\d+) MHz\\] Position: \\(([\\d.-]+), ([\\d.-]+), ([\\d.-]+)\\), Range: (\\d+)/g;\r\n    let match;\r\n\r\n    while ((match = regex.exec(broadcasters.response)) !== null) {\r\n      const frequency = parseInt(match[1], 10);\r\n      const coordinates = [\r\n        parseFloat(match[2]),\r\n        parseFloat(match[3]),\r\n        parseFloat(match[4]),\r\n      ];\r\n      const range = parseInt(match[5], 10);\r\n\r\n      broadcasts.push({ frequency, coordinates, range });\r\n    }\r\n\r\n    server.frequencies.forEach((freq) => {\r\n      if (!broadcasts.find((b) => parseInt(b.frequency) === freq)) {\r\n        this._manager.events.emit(RCEEvent.FrequencyLost, {\r\n          server,\r\n          frequency: freq,\r\n        });\r\n\r\n        server.frequencies = server.frequencies.filter((f) => f !== freq);\r\n      }\r\n    });\r\n\r\n    broadcasts.forEach((broadcast) => {\r\n      if (server.frequencies.includes(broadcast.frequency)) return;\r\n      server.frequencies.push(broadcast.frequency);\r\n\r\n      if (broadcast.frequency === 4765) {\r\n        this._manager.events.emit(RCEEvent.EventStart, {\r\n          server,\r\n          event: 'Small Oil Rig',\r\n          special: false,\r\n        });\r\n      } else if (broadcast.frequency === 4768) {\r\n        this._manager.events.emit(RCEEvent.EventStart, {\r\n          server,\r\n          event: 'Oil Rig',\r\n          special: false,\r\n        });\r\n      }\r\n\r\n      this._manager.events.emit(RCEEvent.FrequencyGained, {\r\n        server,\r\n        frequency: broadcast.frequency,\r\n        coordinates: broadcast.coordinates,\r\n        range: broadcast.range,\r\n      });\r\n    });\r\n\r\n    this.update(server);\r\n\r\n    this._manager.logger.debug(`[${server.identifier}] Broadcasters Updated`);\r\n  }\r\n\r\n  private async fetchGibs(identifier: string) {\r\n    const server = this.get(identifier);\r\n    if (!server) {\r\n      return this._manager.logger.warn(\r\n        `[${identifier}] Failed To Fetch Gibs: Invalid Server`\r\n      );\r\n    }\r\n\r\n    this._manager.logger.debug(`[${server.identifier}] Fetching Gibs`);\r\n\r\n    const bradley = await this.command(\r\n      server.identifier,\r\n      'find_entity servergibs_bradley',\r\n      true\r\n    );\r\n    const heli = await this.command(\r\n      server.identifier,\r\n      'find_entity servergibs_patrolhelicopter',\r\n      true\r\n    );\r\n\r\n    if (!bradley?.response || !heli?.response) {\r\n      return this._manager.logger.warn(\r\n        `[${server.identifier}] Failed To Fetch Gibs`\r\n      );\r\n    }\r\n\r\n    if (\r\n      bradley.response.includes('servergibs_bradley') &&\r\n      !server.flags.includes('BRADLEY')\r\n    ) {\r\n      server.flags.push('BRADLEY');\r\n\r\n      setTimeout(() => {\r\n        const s = this.get(server.identifier);\r\n        if (s) {\r\n          s.flags = s.flags.filter((f) => f !== 'BRADLEY');\r\n          this.update(s);\r\n        }\r\n      }, 60_000 * 10);\r\n\r\n      this._manager.events.emit(RCEEvent.EventStart, {\r\n        server,\r\n        event: 'Bradley APC Debris',\r\n        special: false,\r\n      });\r\n    }\r\n\r\n    if (\r\n      heli.response.includes('servergibs_patrolhelicopter') &&\r\n      !server.flags.includes('HELICOPTER')\r\n    ) {\r\n      server.flags.push('HELICOPTER');\r\n\r\n      setTimeout(() => {\r\n        const s = this.get(server.identifier);\r\n        if (s) {\r\n          s.flags = s.flags.filter((f) => f !== 'HELICOPTER');\r\n          this.update(s);\r\n        }\r\n      }, 60_000 * 10);\r\n\r\n      this._manager.events.emit(RCEEvent.EventStart, {\r\n        server,\r\n        event: 'Patrol Helicopter Debris',\r\n        special: false,\r\n      });\r\n    }\r\n\r\n    this.update(server);\r\n\r\n    this._manager.logger.debug(`[${server.identifier}] Gibs Fetched`);\r\n  }\r\n\r\n  private async updatePlayers(identifier: string) {\r\n    const server = this.get(identifier);\r\n    if (!server) {\r\n      return this._manager.logger.warn(\r\n        `[${identifier}] Failed To Update Players: Invalid Server`\r\n      );\r\n    }\r\n\r\n    this._manager.logger.debug(`[${server.identifier}] Updating Players`);\r\n\r\n    const players = await this.command(server.identifier, 'Users', true);\r\n    if (!players?.response) {\r\n      return this._manager.logger.warn(\r\n        `[${server.identifier}] Failed To Update Players`\r\n      );\r\n    }\r\n\r\n    const playerlist = players.response\r\n      .match(/\"(.*?)\"/g)\r\n      .map((ign) => ign.replace(/\"/g, ''));\r\n    playerlist.shift();\r\n\r\n    const { joined, left } = Helper.comparePopulation(\r\n      server.players,\r\n      playerlist\r\n    );\r\n\r\n    joined.forEach((player) => {\r\n      this._manager.events.emit(RCEEvent.PlayerJoined, {\r\n        server,\r\n        ign: player,\r\n      });\r\n    });\r\n\r\n    left.forEach((player) => {\r\n      this._manager.events.emit(RCEEvent.PlayerLeft, {\r\n        server,\r\n        ign: player,\r\n      });\r\n    });\r\n\r\n    server.players = playerlist;\r\n    this.update(server);\r\n\r\n    this._manager.events.emit(RCEEvent.PlayerListUpdated, {\r\n      server,\r\n      players: playerlist,\r\n      joined,\r\n      left,\r\n    });\r\n\r\n    this._manager.logger.debug(`[${server.identifier}] Players Updated`);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param region - The region to fetch servers from\r\n   * @returns {Promise<FetchedServer[]>} - The fetched servers\r\n   * @description Fetches servers from the authorized GPortal account\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const servers = await manager.servers.fetchServers(\"EU\");\r\n   * ```\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const servers = await manager.servers.fetchServers(\"US\");\r\n   * ```\r\n   *\r\n   * @example\r\n   * ```js\r\n   * const servers = await manager.servers.fetchServers();\r\n   * ```\r\n   */\r\n  public async fetchServers(region?: 'US' | 'EU'): Promise<FetchedServer[]> {\r\n    const token = this._auth?.accessToken;\r\n    if (!token) {\r\n      this._manager.logger.warn('Failed To Fetch Servers: No Access Token');\r\n      return [];\r\n    }\r\n\r\n    this._manager.logger.debug('Fetching Servers');\r\n\r\n    if (!region) {\r\n      const eu = await this.fetchServers('EU');\r\n      const us = await this.fetchServers('US');\r\n      return [...eu, ...us];\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${GPortalRoutes.Origin}/${\r\n          region === 'EU' ? 'eur' : 'int'\r\n        }/menu/clouds`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        this._manager.logger.warn(\r\n          `Failed To Fetch Servers: ${response.status} ${response.statusText}`\r\n        );\r\n        return [];\r\n      }\r\n\r\n      const data = await response.json();\r\n      const fetchedServers: FetchedServer[] = data?.items\r\n        ?.filter((s) => s.label.includes('Rust'))\r\n        .map((s) => {\r\n          return {\r\n            rawName: s.items[0].label,\r\n            name: s.items[0].label.replace(/<color=[^>]+>|<\\/color>/g, ''),\r\n            region,\r\n            sid: [Number(s.items[0].data.url.split('/')[4])],\r\n          };\r\n        });\r\n\r\n      const resolveIdsRequest = await fetch(\r\n        `${GPortalRoutes.Origin}/${region === 'EU' ? 'eur' : 'int'}/serviceIds`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!resolveIdsRequest.ok) {\r\n        this._manager.logger.warn(\r\n          `Failed To Fetch Servers: ${resolveIdsRequest.status} ${resolveIdsRequest.statusText}`\r\n        );\r\n        return fetchedServers ?? [];\r\n      }\r\n\r\n      const resolvedIds = await resolveIdsRequest.json();\r\n      fetchedServers?.forEach((s) => {\r\n        const resolvedId = resolvedIds.find((r) => r.serverId === s.sid[0]);\r\n        if (resolvedId) {\r\n          s.sid.push(resolvedId.serviceId);\r\n        }\r\n      });\r\n\r\n      return fetchedServers ?? [];\r\n    } catch (error) {\r\n      ServerUtils.error(this._manager, `Failed To Fetch Servers: ${error}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private async fetchStatus(\r\n    identifier: string,\r\n    sid: number,\r\n    region: 'EU' | 'US'\r\n  ) {\r\n    const token = this._auth?.accessToken;\r\n    if (!token) {\r\n      console.error(\r\n        `[${identifier}] Failed To Fetch Server Status: No Access Token`\r\n      );\r\n      return null;\r\n    }\r\n\r\n    this._manager.logger.debug(`[${identifier}] Fetching Server Status`);\r\n\r\n    try {\r\n      const response = await fetch(GPortalRoutes.Api, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          operationName: 'ctx',\r\n          variables: {\r\n            sid,\r\n            region,\r\n          },\r\n          query:\r\n            'query ctx($sid: Int!, $region: REGION!) {\\n  cfgContext(rsid: {id: $sid, region: $region}) {\\n    ns {\\n      ...CtxFields\\n      __typename\\n    }\\n    errors {\\n      mutator\\n      affectedPaths\\n      error {\\n        class_\\n        args\\n        __typename\\n      }\\n      scope\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment GameServerFields on GameServer {\\n  id\\n  serverName\\n  serverPort\\n  serverIp\\n  autoUpdate\\n  __typename\\n}\\n\\nfragment PermissionFields on Permission {\\n  userName\\n  created\\n  __typename\\n}\\n\\nfragment MysqlDbFields on CustomerMysqlDb {\\n  httpUrl\\n  host\\n  port\\n  database\\n  username\\n  password\\n  __typename\\n}\\n\\nfragment ServiceStateFields on ServiceState {\\n  state\\n  fsmState\\n  fsmIsTransitioning\\n  fsmIsExclusiveLocked\\n  fsmFileAccess\\n  fsmLastStateChange\\n  fsmStateLiveProgress {\\n    ... on InstallProgress {\\n      action\\n      percentage\\n      __typename\\n    }\\n    ... on BroadcastProgress {\\n      nextMessageAt\\n      stateExitAt\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment RestartTaskFields on RestartTask {\\n  id\\n  runOnWeekday\\n  runOnDayofmonth\\n  runAtTimeofday\\n  runInTimezone\\n  schedule\\n  data {\\n    description\\n    args\\n    scheduleExtended\\n    nextFireTime\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment DisplayPortFields on DisplayPorts {\\n  rconPort\\n  queryPort\\n  __typename\\n}\\n\\nfragment SteamWorkshopItemFields on SteamWorkshopItem {\\n  id\\n  appId\\n  itemType\\n  name\\n  links {\\n    websiteUrl\\n    __typename\\n  }\\n  summary\\n  logo {\\n    url\\n    __typename\\n  }\\n  maps {\\n    workshopId\\n    mapName\\n    __typename\\n  }\\n  dateCreated\\n  dateModified\\n  lastUpdateTime\\n  __typename\\n}\\n\\nfragment SevenDaysModFields on SevenDaysMod {\\n  id\\n  name\\n  repoKey\\n  active\\n  created\\n  modified\\n  __typename\\n}\\n\\nfragment MapParams on FarmingSimulatorMapParamsObject {\\n  serverIp\\n  webServerPort\\n  webStatsCode\\n  token\\n  __typename\\n}\\n\\nfragment TxAdminFields on TxAdmin {\\n  enabled\\n  port\\n  username\\n  password\\n  __typename\\n}\\n\\nfragment CtxFields on RootNamespace {\\n  sys {\\n    game {\\n      name\\n      key\\n      platform\\n      forumBoardId\\n      supportedPlatforms\\n      __typename\\n    }\\n    extraGameTranslationKeys\\n    gameServer {\\n      ...GameServerFields\\n      __typename\\n    }\\n    permissionsOwner {\\n      ...PermissionFields\\n      __typename\\n    }\\n    permissions {\\n      ...PermissionFields\\n      __typename\\n    }\\n    mysqlDb {\\n      ...MysqlDbFields\\n      __typename\\n    }\\n    __typename\\n  }\\n  service {\\n    config {\\n      rsid {\\n        id\\n        region\\n        __typename\\n      }\\n      type\\n      hwId\\n      state\\n      ftpUser\\n      ftpPort\\n      ftpPassword\\n      ftpReadOnly\\n      ipAddress\\n      rconPort\\n      queryPort\\n      autoBackup\\n      dnsNames\\n      currentVersion\\n      targetVersion\\n      __typename\\n    }\\n    latestRev {\\n      id\\n      created\\n      __typename\\n    }\\n    maxSlots\\n    files\\n    memory {\\n      base\\n      effective\\n      __typename\\n    }\\n    currentState {\\n      ...ServiceStateFields\\n      __typename\\n    }\\n    backups {\\n      id\\n      userSize\\n      created\\n      isAutoBackup\\n      __typename\\n    }\\n    restartSchedule {\\n      ...RestartTaskFields\\n      __typename\\n    }\\n    dnsAvailableTlds\\n    __typename\\n  }\\n  admin {\\n    hardwareGuacamoleConnection {\\n      url\\n      __typename\\n    }\\n    __typename\\n  }\\n  profile {\\n    __typename\\n    ... on ProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on MinecraftProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        additionalPorts\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      worlds\\n      addonRam\\n      isRamServer\\n      ramOrderCreationDate\\n      ramStopTimeUtc\\n      isConnectedToBungeecord\\n      bungeecordServerUrl\\n      executables {\\n        id\\n        name\\n        key\\n        default\\n        __typename\\n      }\\n      mods {\\n        id\\n        repoKey\\n        name\\n        image\\n        mindRam\\n        projectUrl\\n        revisions {\\n          id\\n          created\\n          executableId\\n          extraData\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on CsgoProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        gotvPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      installedMaps {\\n        name\\n        displayName\\n        workshopItem {\\n          ...SteamWorkshopItemFields\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ValheimProfileNamespace {\\n      name\\n      cfgFiles\\n      clientLink\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on HellLetLooseProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        statsPort\\n        beaconPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on AloftProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      serverRoomCode\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on SevenDaysToDieProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        telnetPort\\n        webDashboardPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      availableMods {\\n        ...SevenDaysModFields\\n        __typename\\n      }\\n      isModUpdateAvailable\\n      __typename\\n    }\\n    ... on SoulmaskProfileNamespace {\\n      name\\n      cfgFiles\\n      gameUid\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on VRisingProfileNamespace {\\n      name\\n      cfgFiles\\n      isLaunchServer\\n      isOfficialServer\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on RustConsoleProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      modifyActionHints\\n      __typename\\n    }\\n    ... on FarmingSimulatorProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      wiLink\\n      defaultModSpace\\n      masterWiLink\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        webPort\\n        __typename\\n      }\\n      mapParams {\\n        ...MapParams\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on BungeecordProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        additionalPorts\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      gpServers\\n      accessibleMinecraftServers {\\n        ...GameServerFields\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ConanProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      enableDeleteSavegames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      isModUpdateAvailable\\n      __typename\\n    }\\n    ... on FiveMProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      txAdmin {\\n        ...TxAdminFields\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ScumProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      enableDeleteSavegames\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        serverPort\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on PalworldProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        __typename\\n      }\\n      enableDeleteSavegames\\n      __typename\\n    }\\n    ... on AbioticFactorProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      joinCode\\n      __typename\\n    }\\n  }\\n  __typename\\n}',\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          `[${identifier}] Failed To Fetch Server Status: ${response.status} ${response.statusText}`\r\n        );\r\n        return null;\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data?.data?.cfgContext?.ns?.service?.currentState\r\n        ?.state as FarmingSim25Server['status'];\r\n    } catch (error) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Fetch Server Status: ${error.message}`\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private async fetchId(identifier: string, sid: number, region: 'EU' | 'US') {\r\n    const token = this._auth?.accessToken;\r\n    if (!token) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Fetch Server ID: No Access Token`\r\n      );\r\n      return null;\r\n    }\r\n\r\n    this._manager.logger.debug(`[${identifier}] Fetching Server ID`);\r\n\r\n    try {\r\n      const response = await fetch(GPortalRoutes.Api, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          operationName: 'sid',\r\n          variables: {\r\n            gameserverId: Number(sid),\r\n            region,\r\n          },\r\n          query:\r\n            'query sid($gameserverId: Int!, $region: REGION!) {\\n  sid(gameserverId: $gameserverId, region: $region)\\n}',\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          `[${identifier}] Failed To Fetch Server ID: ${response.status} ${response.statusText}`\r\n        );\r\n        return null;\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data?.errors?.length) {\r\n        this._manager.logger.warn(\r\n          `[${identifier}] Failed To Fetch Server ID: ${data.errors[0].message}`\r\n        );\r\n        return null;\r\n      }\r\n\r\n      const serverId = data?.data?.sid as number;\r\n      if (!serverId) {\r\n        ServerUtils.error(\r\n          this._manager,\r\n          `[${identifier}] Failed To Fetch Server ID: Invalid SID`\r\n        );\r\n        return null;\r\n      }\r\n\r\n      return serverId;\r\n    } catch (error) {\r\n      ServerUtils.error(\r\n        this._manager,\r\n        `[${identifier}] Failed To Fetch Server ID: ${error.message}`\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n}\r\n"]}